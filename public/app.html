<!doctype html>
<html>
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
 <title>Camera with mediaDevice</title>
</head>
<body>
  <button onclick="startVideo()">Start</button>
  <br />
  <video id="local_video" style="width: 320px; height: 240px; border: 1px solid black;"></video>
</body>
<script type="text/javascript">
  let localVideo = document.getElementById('local_video');
  let localStream;

  // start local video
  function startVideo() {
    console.log("startVideo");
    const option = {
               "audio": false,
               "video": {
                "mandatory": {
                 "maxWidth": 1920,
                 "maxHeight": 1080
                },
                "optional": [
                 {
                  "minWidth": 1920
                 },
                 {
                  "minHeight": 1080
                 }
                ]
               }
              };
    navigator.mediaDevices.getUserMedia(option)
    .then(function (stream) { // success
      console.log("success");
      localStream = stream;
      localVideo.src = window.URL.createObjectURL(localStream);
      localVideo.onloadedmetadata = function(e) {
        localVideo.play();
      };
    }).catch(function (error) { // error
      console.error('mediaDevice.getUserMedia() error:', error);
      return;
    });
  }
</script>
</html>
